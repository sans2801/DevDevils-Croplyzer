from flask import Flask
import os
import re
import operator
import requests
import json
import base64
from flask import request
# from flask_ngrok import run_with_ngrok

app = Flask(__name__)
# run_with_ngrok(app)



@app.route('/',  methods=['POST'])
def workflow():
    req = json.loads(request.data)
    val = req["service"]
    print(val)
    if val == "camera":  
        return "data:image/jpeg;base64,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"

    if val == "footage":
        return "https://i.imgur.com/lT14jJC.jpg"

    if val == "forward":
        return "Moved Forward"

    if val == "right":
        return "Moved Right"

    if val == "left":
        return "Moved Left"

    if val == "backward":
        return "Moved Backward"

    if val == "motor1":
        direction = req["direction"]
        if direction == "upward":
            #motor1_forward()
            return "Motor1 - Upward"
        elif direction == "downward":
            #motor1_reverse()
            return "Motor1 - Downward"
        else:
            #motor1_stop()
            return "Motor1 - Stop"

    if val == "motor2":
        direction = req["direction"]
        if direction == "backward":
            #motor2_forward()
            return "Motor2 - Backward"
        elif direction == "forward":
            #motor2_reverse()
            return "Motor2 - Forward"
        else:
            #motor2_stop()
            return "Motor2 - Stop"
    print("Nothing specified")
    return "None"

if __name__ == "__main__":
    app.run(port=8081, debug=True)